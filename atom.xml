<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>White&#39;s Blog</title>
  
  <subtitle>少年他的奇幻漂流</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://white8818.github.io/"/>
  <updated>2020-05-25T02:02:27.239Z</updated>
  <id>https://white8818.github.io/</id>
  
  <author>
    <name>White</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>使用WKWebview拦截替换本地资源</title>
    <link href="https://white8818.github.io/iOS%E5%BC%80%E5%8F%91/%E4%BD%BF%E7%94%A8WKWebview%E6%8B%A6%E6%88%AA%E6%9B%BF%E6%8D%A2%E6%9C%AC%E5%9C%B0%E8%B5%84%E6%BA%90/"/>
    <id>https://white8818.github.io/iOS开发/使用WKWebview拦截替换本地资源/</id>
    <published>2020-05-22T08:41:29.000Z</published>
    <updated>2020-05-25T02:02:27.239Z</updated>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;WKWebView&lt;/code&gt;替换本地资源的原理是通过&lt;code&gt;NSURLProtocol&lt;/code&gt;代理&lt;code&gt;WKWebView&lt;/code&gt;内的所有网络请求, 中间拿到每次加载的&lt;code&gt;URL&lt;/code&gt;, 然后动态替换成本地沙盒内的对应路径下的资源文件.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;什么是NSURLProtocol&quot;&gt;&lt;a href=&quot;#什么是NSURLProtocol&quot; class=&quot;headerlink&quot; title=&quot;什么是NSURLProtocol&quot;&gt;&lt;/a&gt;什么是NSURLProtocol&lt;/h2&gt;&lt;p&gt;&lt;code&gt;NSURLProtocol&lt;/code&gt;是URL Loading System的重要组成部分。它听上去像一个协议类, 其实不是, 它是一个抽象类, 我们可以子类化来拦截网络请求。可以拦截的网络请求包括&lt;code&gt;NSURLSession&lt;/code&gt;，&lt;code&gt;NSURLConnection&lt;/code&gt;以及&lt;code&gt;UIWebvIew&lt;/code&gt;。本来之前是不能拦截&lt;code&gt;WKWebView&lt;/code&gt;的, 因为&lt;code&gt;WKWebView&lt;/code&gt; 在独立于 app 进程之外的进程中执行网络请求，请求数据不经过主进程，因此，在 &lt;code&gt;WKWebView&lt;/code&gt; 上直接使用 &lt;code&gt;NSURLProtocol&lt;/code&gt;无法拦截请求。&lt;/p&gt;
&lt;p&gt;但是有大神通过阅读webkit的源码, 以及使用反射的方式拿到了&lt;code&gt;WKWebView&lt;/code&gt;用来处理请求的上下文和注册反注册方法: &lt;code&gt;WKBrowsingContextController&lt;/code&gt;和&lt;code&gt;registerSchemeForCustomProtocol&lt;/code&gt;, &lt;code&gt;unregisterSchemeForCustomProtocol&lt;/code&gt;. 然后通过KVC拿到&lt;code&gt;browsingContextController&lt;/code&gt;实例, 把&lt;code&gt;http&lt;/code&gt;和&lt;code&gt;https&lt;/code&gt;请求注册给&lt;code&gt;NSURLProtocol&lt;/code&gt;处理.&lt;/p&gt;
    
    </summary>
    
      <category term="iOS开发" scheme="https://white8818.github.io/categories/iOS%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="iOS" scheme="https://white8818.github.io/tags/iOS/"/>
    
      <category term="WKWebView" scheme="https://white8818.github.io/tags/WKWebView/"/>
    
      <category term="热更新" scheme="https://white8818.github.io/tags/%E7%83%AD%E6%9B%B4%E6%96%B0/"/>
    
  </entry>
  
  <entry>
    <title>iOS开发-阿拉伯适配RTL</title>
    <link href="https://white8818.github.io/iOS%E5%BC%80%E5%8F%91/iOS%E5%BC%80%E5%8F%91-%E9%98%BF%E6%8B%89%E4%BC%AF%E9%80%82%E9%85%8DRTL/"/>
    <id>https://white8818.github.io/iOS开发/iOS开发-阿拉伯适配RTL/</id>
    <published>2019-10-24T03:21:55.000Z</published>
    <updated>2020-05-22T11:36:42.575Z</updated>
    
    <summary type="html">
    
      &lt;h2 id=&quot;什么是RTL布局&quot;&gt;&lt;a href=&quot;#什么是RTL布局&quot; class=&quot;headerlink&quot; title=&quot;什么是RTL布局&quot;&gt;&lt;/a&gt;什么是RTL布局&lt;/h2&gt;&lt;p&gt;RTL布局是针对中东地区的书写习惯适配的一套从右向左的布局方式，字面意思就是&lt;code&gt;Right-to-Left&lt;/code&gt;.&lt;br&gt;针对iOS9之后的RTL适配，苹果有一个&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/MacOSX/Conceptual/BPInternational/SupportingRight-To-LeftLanguages/SupportingRight-To-LeftLanguages.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;官方文档&lt;/a&gt;教我们怎么做适配。&lt;/p&gt;
    
    </summary>
    
      <category term="iOS开发" scheme="https://white8818.github.io/categories/iOS%E5%BC%80%E5%8F%91/"/>
    
    
      <category term="iOS" scheme="https://white8818.github.io/tags/iOS/"/>
    
      <category term="阿拉伯" scheme="https://white8818.github.io/tags/%E9%98%BF%E6%8B%89%E4%BC%AF/"/>
    
      <category term="RTL" scheme="https://white8818.github.io/tags/RTL/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Next主题定制</title>
    <link href="https://white8818.github.io/Hexo/Hexo+Next%E4%B8%BB%E9%A2%98%E5%AE%9A%E5%88%B6/"/>
    <id>https://white8818.github.io/Hexo/Hexo+Next主题定制/</id>
    <published>2018-12-25T10:54:09.000Z</published>
    <updated>2020-05-22T11:36:38.558Z</updated>
    
    <summary type="html">
    
      &lt;h3 id=&quot;设置主题风格&quot;&gt;&lt;a href=&quot;#设置主题风格&quot; class=&quot;headerlink&quot; title=&quot;设置主题风格&quot;&gt;&lt;/a&gt;设置主题风格&lt;/h3&gt;&lt;p&gt;打开 &lt;code&gt;themes/next/_config.yml&lt;/code&gt;件，搜索 scheme 关键字，将你需用启用的 &lt;code&gt;scheme&lt;/code&gt; 前面注释 &lt;code&gt;#&lt;/code&gt; 去除即可。&lt;/p&gt;
&lt;h4 id=&quot;Scheme-Settings&quot;&gt;&lt;a href=&quot;#Scheme-Settings&quot; class=&quot;headerlink&quot; title=&quot;#Scheme Settings&quot;&gt;&lt;/a&gt;#Scheme Settings&lt;/h4&gt;&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#scheme: Muse #默认 Scheme，这是 NexT 最初的版本，黑白主调，大量留白 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#scheme: Mist #Muse 的紧凑版本，整洁有序的单栏外观 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attr&quot;&gt;scheme:&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;Pisces&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;#双栏 Scheme，小家碧玉似的清新 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#scheme: Gemini #类似 Pisces&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="Hexo" scheme="https://white8818.github.io/categories/Hexo/"/>
    
    
      <category term="Next" scheme="https://white8818.github.io/tags/Next/"/>
    
      <category term="主题" scheme="https://white8818.github.io/tags/%E4%B8%BB%E9%A2%98/"/>
    
      <category term="配置" scheme="https://white8818.github.io/tags/%E9%85%8D%E7%BD%AE/"/>
    
      <category term="hexo" scheme="https://white8818.github.io/tags/hexo/"/>
    
  </entry>
  
</feed>
